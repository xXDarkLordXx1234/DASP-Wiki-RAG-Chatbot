%META:TOPICINFO{author="IvanGalkin" date="1233424178" format="1.1" reprev="9" version="9"}%
%META:TOPICPARENT{name="WebHome"}%
%EDITTABLE{ sort="on" tableborder="0" cellpadding="1" cellspacing="3" headerrows="2"}%
| *Ivan Aufgaben* ||
| *Aufgabe* | *% done* |
| Einarbeitung !DataMachine | 75 |

%EDITTABLE{  sort="on" tableborder="0" cellpadding="1" cellspacing="3" headerrows="2"  footerrows = "1" }%
| *van Stunden* ||||
| *Aufgabe* | *Datum* | *Stunden* | *Bemerkungen* |
| Einarbeitung !DataMachine | 13.01.2009 | 4 | Installation von MySQL, Einrichtung der Datenbank, Einlesen in Quellcode und UKP-Seite, Download von SimpleEnglish-Dump, Starten der DataMachine (in einigen Stunden wurden die Daten erfolgreich generiert) |
| Einarbeitung !DataMachine | 14.01.2009 | 2 | Einlesen in den Programm-Quellcode und die Modifikation dieses Programmcodes, erfolgreicher DataMachine-Programmstart mit dem GZip-on-the-fly-Parser |
| Einarbeitung !DataMachine | 15.01.2009 | 5 | Recherche nach BZip2-Parser; Enwickeln, Implementieren und Testen der neuen Funktionalitäten für on the fly entpacken. Start des Zwischentests. |
| Einarbeitung !DataMachine | 16.01.2009 | 1 | Bearbeitung von Testergebnissen, Fehlerkorrekturen, Testen (Zwischenergebnisse an Torsten gesendet) |
| Einarbeitung !DataMachine | 19.01.2009 | 4 | Recherche nach LZMA bzw. 7Zip Entpackungsmöglichkeiten: kein funktionsfähiger Java-Code gefunden. Als Variante - Verwendung von Binaries (7z.exe, 7za) in pipe möglich |
| Einarbeitung !DataMachine | 20.01.2009 | 3 | Test eines 7Zip-Java-Frameworks (https://sourceforge.net/projects/sevenzipjbind/). Schien zu funktionieren (nur unter Windows) aber entpackt nur solche Datenmenge, die in VM Heap passt |
| Einarbeitung !DataMachine | 30.01.2009 | 7 | <ul><li>Installation von Eclipse, .NET Framework, !MySQL etc; </li><li>Runterladen von Dump-Dateien; </li><li>Testen des korrigierten 7Zip-JBinding-Framework (unbefriedigende Ergebnisse); </li><li>Enwicklung einer eigenen Entpackungmethode (Pipe zwischen 7z.exe / 7z und den Parsern - im Vergleich zu 7Zip-JBinding gibt es die Möglichkeit ans Betriebsystem anzupassen)</li><li>Start der Applikation mit dem deutschen Dump von 20081206; Erwartung - Abbruch wegen des Speichermangels</li></ul> |
| Einarbeitung !DataMachine | 31.01.2009 | 6 | <ul><li>Weiterentwicklung der Entpackungsmethoden</li><li>Detailierte Analyse des Quellcodes der Appliaktion Schlussfolgerung - inkonsequente Benutzung der Resourcen, Für die Analyse der aktuellen deutschen/englischen Dumps grundsätzliche Korrekturen notwendig.</li><li> Erstellung der HIlfstabelle (s.u.)</li></ul> |
| *Summe* | | %CALC{"$SUM( $ABOVE() )"}% | |

<nop> <!-- @page { size: 21cm 29.7cm; margin: 2cm } P { margin-bottom: 0.21cm } -->
---++ !DataMachine - Programmablauf, Probleme und mögliche Lösungen
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Entpacken der Dateien <span style="background: #ffff00 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">%LANG%wiki-%TIMESTAMP%-categorylinks.sql.gz</span> und <span style="background: #ffff00 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">%LANG%wiki-%TIMESTAMP%-pagelinks.sql.gz</span>, wodurch entsprechende temporäre Files entstehen</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #ff3366 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">%TEMPDIRECTORY%/%LANG%wiki-%TIMESTAMP%-categorylinks.sql</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #ff3366 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">%TEMPDIRECTORY%/%LANG%wiki-%TIMESTAMP%-pagelinks.sql</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Verwendung der Klasee XML2SQL, bzw. der Klasse org.mediawiki.dumper.Dumper um die Datei <span style="background: #ffff00 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">%LANG%wiki-%TIMESTAMP%-pages-meta-history.xml.bz2</span> zu entpacken und aus dem XML in SQL-Format umzuwandeln. Ergebnis &ndash; temporäre Datei </font></font>%ENDCOLOR% </p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #ff3366 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">%TEMPDIRECTORY%/%LANG%wiki-%TIMESTAMP%-pages-meta-history.sql</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Die SQL-Datei aus dem zweiten Schritt wird mithilfe der statischen Klasse SQL2TXT bearbeitet, woraus 3 temporäre Dateien entstehen</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<span style="background: #ff3366 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">&bdquo;<font face="Thorndale AMT, serif"><font size="2">%TEMPDIRECTORY%/page.txt&ldquo;, </font></font></span>%ENDCOLOR% </p>
      1 <p>%BLACK%<span style="background: #ff3366 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">&bdquo;<font face="Thorndale AMT, serif"><font size="2">%TEMPDIRECTORY%/text.txt&ldquo;, </font></font></span>%ENDCOLOR% </p>
      1 <p>%BLACK%<span style="background: #ff3366 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">&bdquo;<font face="Thorndale AMT, serif"><font size="2">%TEMPDIRECTORY%/revision.txt&ldquo; </font></font></span>%ENDCOLOR% </p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Bearbeitung der &bdquo;%TEMPDIRECTORY%/revision.txt&ldquo; (processRevision()) und das Ausfüllen der HashMap mit allen Artikel-Änderungen.</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Parsen der Datei &bdquo;%TEMPDIRECTORY%/page.txt&ldquo; (processPage()), Speicherung der Ergebnisse</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<span style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">&bdquo;<font face="Thorndale AMT, serif"><font size="2">Category.txt&ldquo;</font></font></span>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Parsen der Datei &bdquo;%TEMPDIRECTORY%/%LANG%wiki-%TIMESTAMP%-categorylinks.sql&ldquo; (processCategoryLinks()), Speicherung der Ergebnisse</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">page_categories.txt</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">category_pages.txt</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">category_inlinks.txt</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">category_outlinks.txt</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Parsen der Datei &bdquo;%TEMPDIRECTORY%/%LANG%wiki-%TIMESTAMP%-pagelinks.sql&ldquo; (parocessPageLinks()), Speicherung der Ergebnisse </font></font>%ENDCOLOR% </p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">page_inlinks.txt</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">page_outlinks.txt</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Parsen der Datei &bdquo;%TEMPDIRECTORY%/text.txt&ldquo; (processText()), Speicherung der Ergebnisse</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">Page.txt</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">PageMapLine.txt</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">page_redirects.txt</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Speicherung der Beschreibung (writeMetedata())</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: #008000 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2">MetaData.txt</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font size="2">Entfernung der temporalen Dateien</font></font>%ENDCOLOR%</p>

%BLACK%<font face="Thorndale AMT, serif"><font size="2">Legende: </font></font>%ENDCOLOR%

%BLACK%<font face="Thorndale AMT, serif"><font size="2">Gelb - Wikipedia Dumps</font></font>%ENDCOLOR%

Rot - %BLACK%<font face="Thorndale AMT, serif"><font size="2">Temporäre Dateien</font></font>%ENDCOLOR%

%BLACK%<font face="Thorndale AMT, serif"><font size="2">Grün - Output-Dateien</font></font>%ENDCOLOR%

%BLACK%<font face="Thorndale AMT, serif"><font size="2">Jeder Schritt der Schritte 5 bis 9 erstellt so viel Dateien, wie viel Wikipdia-Snapshots gewünscht wurden.</font></font>%ENDCOLOR%

%BLACK%<font face="Thorndale AMT, serif"><font size="2">Schlussfolgerung:</font></font>%ENDCOLOR%
   1 <p>Es ist nicht notwendig, die Dateien <span style="background: #ffff00 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">%LANG%wiki-%TIMESTAMP%-categorylinks.sql.gz</span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial"> und </span><span style="background: #ffff00 none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">%LANG%wiki-%TIMESTAMP%-pagelinks.sql.gz </span><span style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">im ersten Schritt zu entpacken, weil es möglich ist die genannte Dateien in den Schritten 6 und 7 durch den Einsatz der Java-Klasse</span>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2"> </font></font>%ENDCOLOR%%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">GZIPInputStream</font></font>%ENDCOLOR%%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="2"> </font></font>%ENDCOLOR%%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">direkt aus der komprimierten Datei zu parsen. Dies wurde erfolgreich mit Klasse BufferedReaderFactory eingesetzt.</font></font>%ENDCOLOR%</p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Die Verwendung d</font></font>%ENDCOLOR%%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">er Klasse org.mediawiki.dumper.Dumper (Schritt 2) zwingt uns</font></font>%ENDCOLOR%</p> 
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">entweder BZ2 oder entpackte Dateien zu verwenden (10 Mal größer als 7Zip-Archiv)</font></font>%ENDCOLOR%</p>
      1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Ergebnisse der XML-&gt;SQL Konvertierung auf der Festplatte zu speichern (Äquivalent der kompletten entpacken) </font></font>%ENDCOLOR% </p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Die SQL2TXT-Konvertierung ist so entwickelt, dass die Ergebnis-Daten auch auf der Festplatte gespeichert werden sollen. Diese Tatsache ist einem nochmaligen Entpacken ähnlich. </font></font>%ENDCOLOR% </p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Dadurch entstehende Datenmengen verhindern die Bearbeitung größerer Wikipediaen</font></font>%ENDCOLOR%</p>

%BLACK%<font face="Thorndale AMT, serif"><font size="3">Lösungsvorschläge</font></font>%ENDCOLOR%
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Entwicklung eines 7Zip-Entpackers. Da es momentan kompliziert ist einen funktionsfähigen Java-Code zu finden, ist es möglich folgendes Schema zu verwenden: </font></font>%ENDCOLOR% </p> 
      1 <p><font face="Thorndale AMT, serif"><font size="3"><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">Process proc = Runtime.</font>%BLACK%<em style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">getRuntime</em>%ENDCOLOR%<font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">().exec(&bdquo;7z[.exe] e -so&ldquo;.concat(archiveFilename));</font></font></font></p>
      1 <p><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">Verwendung von Ouput-Streams des </font>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Originalentpackers InputStream input</font></font>%ENDCOLOR%<font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial"> = proc.getInputStream();</font></p> <p><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">Dieses Schema ist leicht an jedes Betriebssystem anzupassen, für das ein 7Zip Entpacker implementiert ist</font></p>
   1 <p><font face="Thorndale AMT, serif"><font size="3"><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">Ans</font><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">tatt die Klasse </font><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">org.mediawiki.dumper.Dumper, die Klassen </font><font color="black" style="background: transparent none repeat scroll 0% 0%; text-decoration: none; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial">XmlDumpWriter xmldDumpReader zu verwenden, die Stream-Konzepte unterstützen, und dadurch nicht aus einer Datei, sondern aus einem dem Stream lesen und in einen Stream schreiben können. (S. Punkt 1)</font></font></font></p>
   1 <p>%BLACK%<font face="Thorndale AMT, serif"><font style="background: transparent none repeat scroll 0% 0%; -moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial" size="3">Grundsätzlich wo es möglich ist Dateien mit den Streams ersetzen. Dadurch kann man es versuchen, die temporäre Dateien überhaupt zu vermeiden</font></font>%ENDCOLOR%</p>